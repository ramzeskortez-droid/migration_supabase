# Инструкция по миграции Gemini CLI и MCP (C: -> F:)

Эта инструкция предназначена для развертывания рабочего окружения на новом ноутбуке, где Gemini установлен по нестандартному пути (`F:\...`).

## 1. Подготовка окружения (Runtimes)

Перед запуском убедитесь, что установлены языки программирования, так как MCP сервера используют и JS, и Python.

1.  **Node.js**: Установите версию 20+ (LTS).
    *   Проверка: `node -v` и `npm -v` в терминале.
2.  **Python**: Установите Python 3.10+.
    *   **Важно:** При установке поставьте галочку "Add Python to PATH".
    *   Проверка: `python --version`.

## 2. Перенос Глобальной папки .gemini

Все ваши расширения (Computer Use, Conductor, Supabase) живут в глобальной папке пользователя. Если вы скопировали только папку проекта, они работать не будут.

1.  Найдите папку `.gemini` на старом ноутбуке: `C:\Users\Dima\.gemini`.
2.  Скопируйте её целиком на новый ноутбук в домашнюю директорию текущего пользователя.
    *   Обычно это: `C:\Users\<NewUser>\.gemini`.
    *   Даже если Node.js на диске F:, домашняя папка пользователя обычно на C:. Gemini ищет настройки именно в `%HOMEPATH%\.gemini`.

## 3. Исправление путей в конфигах (Самый важный этап)

Так как пути изменились, нужно отредактировать файлы конфигурации вручную.

### А. Файл запуска проекта (GEMINI_PROXY_ONLY.bat)
В папке проекта откройте `GEMINI_PROXY_ONLY.bat` через блокнот.
Замените строку запуска node на актуальный путь к `gemini-cli` на новом диске F.

**Было:**
```bat
node C:\Users\Dima\AppData\Roaming\npm\node_modules\@google\gemini-cli\dist\index.js %*
```

**Стало (пример для вашего пути):**
```bat
node F:\NodeJS\node\node_modules\google\gemini-cli\dist\index.js %*
```

### Б. Глобальные настройки (settings.json / gemini.json)
Откройте файл `C:\Users\<NewUser>\.gemini\settings.json` (или `gemini.json`).
Найдите пути к расширениям. Они могут выглядеть как `C:\\Users\\Dima\\.gemini\\extensions\\...`.
Убедитесь, что они указывают на правильное место на новом ноутбуке. Если вы перенесли `.gemini` в корень пользователя, пути должны быть корректными, но имя пользователя (`Dima`) могло измениться.

## 4. Восстановление зависимостей MCP серверов

Просто скопировать файлы недостаточно. Нужно переустановить библиотеки.

### Computer Use (Python)
Этот модуль требует особого внимания.
1.  Откройте терминал в папке: `C:\Users\<NewUser>\.gemini\extensions\ComputerUse` (или где он лежит).
2.  Создайте и активируйте виртуальное окружение (рекомендуется):
    ```powershell
    python -m venv venv
    .\venv\Scripts\activate
    ```
3.  Установите зависимости:
    ```powershell
    pip install -r requirements.txt
    playwright install chromium
    ```

### JS Расширения (Conductor, Supabase)
Для каждого расширения, написанного на JS (в папке `extensions`):
1.  Зайдите в папку расширения.
2.  Если там есть `package.json`, выполните:
    ```powershell
    npm install
    ```

## 5. Проверка локального mcp-server (Project Level)

В папке проекта есть `mcp-server`. Если вы хотите запускать его локально (для тестов), выполните в этой папке:
```powershell
npm install
```
*Примечание: Если `settings.json` проекта настроен только на `my-db` (remote), этот шаг опционален, но полезен для разработки.*

## 6. Запуск

1.  Запустите обновленный `GEMINI_PROXY_ONLY.bat`.
2.  Если возникают ошибки:
    *   Используйте команду `/help` внутри Gemini.
    *   Если ошибка связана с путями, проверьте логи или вывод консоли — там будет указано, какой файл не найден.

---
**Сводка по 6 MCP:**
1.  **my-db**: Работает сразу (конфиг в проекте, ссылка на веб).
2.  **computer-use**: Требует Python + Playwright + Fix Path.
3.  **conductor**: Требует Fix Path + npm install.
4.  **supabase**: Требует Fix Path + npm install.
5.  **codebase_investigator**: Встроен/зависим от ядра/расширений. Заработает после фикса путей.
6.  **cli_help**: Встроен. Заработает после старта.
