# Version History

## 1.18.77 - Глобальный редизайн Хедеров и Настройки валидации
- **Core UI (Unified Header):**
  - Полный переход всех интерфейсов (Менеджер, Оператор, Закупщик) на единую систему хедера через `useHeaderStore`.
  - Удалены локальные компоненты `AdminHeader.tsx` и `BuyerHeader.tsx`.
  - В шапку Менеджера интегрированы кнопки DEBUG ("Очистить БД", "100/1000") с индикацией прогресса.
  - Улучшена логика курсов валют: теперь при сохранении используется локальная дата браузера (YYYY-MM-DD), а страница принудительно перезагружается для обновления данных.
- **Admin Settings:**
  - Реализован UI на основе аккордеонов для разделов "Закупщик" и "Оператор" для экономии места.
  - Добавлена настройка обязательности полей для Оператора (Телефон, Имя, Почта, Адрес, Срок, Тема, Позиции).
- **Operator Workflow:**
  - Внедрена динамическая валидация при создании заказа на основе настроек менеджера.
  - Добавлена визуальная индикация обязательных полей (красная звездочка `*`).
  - Реализована разовая анимация (вспышка красным) для пустых обязательных полей при нажатии "Создать", с автоматическим сбросом подсветки через 1 секунду.
- **Manager Order Details:**
  - В таблицу позиций добавлена колонка "Бренд" (расположена между Наименованием и Артикулом).

## 1.18.76 - Обновление интерфейса Закупщика и логики архивации
- **Buyer UI:**
  - Кнопка чата переименована в "Оператор".
  - Исправлено отображение причины аннулирования заказа (статус "АННУЛИРОВАН" + причина).
  - Исправлена проблема потери причины аннулирования при раскрытии заказа (getOrderDetails).
- **Chat Logic:**
  - Изменена логика авто-архивации. Чаты теперь архивируются СТРОГО по статусу заказа (Архив/Отказ/Аннулирован), а не по времени. Если заказ возвращается в работу, чат восстанавливается.
- **Chat UI:**
  - Исправлена инициализация чата - при открытии сразу выбирается нужный тред и активируется поле ввода.

## 1.18.75 - Обновление Оператора (Почта, Торги, Ручная обработка)
...