# Технический глоссарий и ключевые понятия

В этом документе собраны важные программные термины и поля базы данных, объясненные простыми словами. Это поможет быстро понять, "как всё связано" внутри системы.

---

## 1. owner_token (Токен владельца)
- **Используется в:** Таблице `orders` (заказы) и в интерфейсе **Оператора**.
- **Означает:** Уникальный "паспортный номер" (секретный ключ) оператора, который создал данный заказ.
- **Простыми словами:** Это **цифровая подпись**. Представьте, что в большом архиве на каждой папке с делом стоит имя сотрудника. Благодаря `owner_token` система знает: "Этот заказ создал Иван, значит, показывать его нужно только Ивану в его личном кабинете". Это обеспечивает **изоляцию данных**, чтобы разные операторы не видели заказы друг друга и не мешали в работе.

---

## 2. user_token / buyerToken (Токен пользователя / закупщика)
- **Используется в:** Таблицах `app_users` (пользователи), `buyer_order_labels` (стикеры) и при входе **Закупщика**.
- **Означает:** Личный идентификатор закупщика в системе.
- **Простыми словами:** Это **универсальный ключ-идентификатор**. Когда закупщик клеит "синий стикер" на заказ, система записывает в базу: "Закупщик с токеном `buy1` пометил заказ №5 синим цветом". Если зайдет другой закупщик с токеном `buy2`, он не увидит этот стикер, потому что у него свой "набор наклеек". Также по этому токену мы прячем заказы из списка "Новые", если закупщик уже отправил по ним предложение.

---

## 3. Invite Code (Инвайт-код)
- **Используется в:** Форме регистрации закупщика.
- **Значение по умолчанию:** `china-nai`.
- **Простыми словами:** Это **"пароль на входе" или фейс-контроль**. Платформа закрытая, поэтому любой человек "с улицы" не может просто так создать аккаунт. Менеджер выдает доверенным закупщикам это секретное слово, чтобы они могли пройти регистрацию. Без него кнопка регистрации не сработает.

---

## 4. is_winner / rank (Лидер / Победитель)
- **Используется в:** Таблице `offer_items` (предложения закупщиков).
- **Означает:** Статус предложения (ЛИДЕР или РЕЗЕРВ).
- **Простыми словами:** Это **победитель тендера**. На одну позицию (например, "Датчик давления") могут прислать цены 5 разных закупщиков. Менеджер сравнивает их и нажимает кнопку "Выбрать". В этот момент одно предложение получает метку `is_winner = true`. Система понимает, что именно эта цена — правильная, и её нужно показать оператору и клиенту.

---

## 5. admin_price_rub (Итоговая цена в рублях)
- **Используется в:** Таблице `order_items` (состав заказа) и интерфейсе **Оператора**.
- **Означает:** Финальная стоимость товара для клиента, рассчитанная менеджером.
- **Простыми словами:** Это **"ценник на витрине"**. Оператору не нужно знать, по какому курсу закупали товар или сколько стоила доставка за килограмм. Менеджер на своей стороне нажимает кнопку "Выбрать лидера", система автоматически считает формулу и записывает готовую сумму в рублях в поле `admin_price_rub`. Оператор просто видит цифру и озвучивает её клиенту.

---

## 6. is_manual_price (Ручной ввод цены)
- **Используется в:** Таблице товаров при расчетах Менеджера.
- **Означает:** Флаг (да/нет), указывающий, была ли цена введена вручную.
- **Простыми словами:** Это **блокировка авторасчета**. Обычно система сама считает цену по формуле (Курс + Доставка + Наценка). Но если менеджер хочет сделать скидку или, наоборот, округлить сумму, он нажимает "карандашик" и вводит число сам. Флаг `is_manual_price` говорит системе: "Не пересчитывай эту цену по курсу, я ввел её руками, оставь как есть".

---

## 7. workflowStatus (Статус процесса)
- **Используется в:** Всех интерфейсах для отслеживания движения заказа.
- **Простыми словами:** Это **"шаги на конвейере"**. Заказ проходит путь от `В обработке` (ввод данных) до `Выполнен`. Этот статус — главный "двигатель" системы: он определяет, в какой вкладке лежит заказ и какие кнопки (например, "Обработано" или "Сформировать КП") доступны пользователям.
